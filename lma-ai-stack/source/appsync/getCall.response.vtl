#if ( $ctx.error )
  $util.error($ctx.error.message, $ctx.error.type)
#end

#if(!$context.identity.groups.contains("Admin")
    && $context.result.Owner != $context.identity.username
    && !$context.result.SharedWith.contains($context.identity.username))
      $util.error("User $context.identity.username is not authorized", "AuthorizationError")
#else
  $utils.toJson($context.result)
#end